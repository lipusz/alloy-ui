AUI.add("aui-form-base",function(b){var h=b.Lang,c=b.ClassNameManager.getClassName,i="form",a=c(i),f=c("field","labels"),e=c("field","labels","inline"),d={left:[f,"left"].join("-"),right:[f,"right"].join("-"),top:[f,"top"].join("-")};var g=b.Component.create({NAME:i,ATTRS:{action:{value:location.href,getter:"_attributeGetter",setter:"_attributeSetter"},id:{},method:{value:"POST",getter:"_attributeGetter",setter:"_attributeSetter"},monitorChanges:{value:false},nativeSubmit:{value:false},values:{getter:function(l){var j=this;var k=b.io._serialize(j.get("contentBox").getDOM());return b.QueryString.parse(k);},setter:function(m){var j=this;var k=j._setFieldsObject;var l=j.get("monitorChanges");if(h.isArray(m)){k=j._setFieldsArray;}b.each(m,b.rbind(k,j,l));return b.Attribute.INVALID_VALUE;}},fieldValues:{getter:function(k){var j=this;var l={};j.fields.each(function(n,m,o){l[n.get("name")]=n.get("value");});return l;}},labelAlign:{value:""}},HTML_PARSER:{action:function(k){var j=this;return j._attributeGetter(null,"action");},method:function(k){var j=this;return j._attributeGetter(null,"method");}},prototype:{CONTENT_TEMPLATE:"<form></form>",initializer:function(){var j=this;j.fields=new b.DataSet({getKey:j._getNodeId});},renderUI:function(){var j=this;j._renderForm();},bindUI:function(){var j=this;var k=j.get("nativeSubmit");if(!k){j.get("contentBox").on("submit",j._onSubmit);}j.after("disabledChange",j._afterDisabledChange);j.after("labelAlignChange",j._afterLabelAlignChange);j.after("nativeSubmitChange",j._afterNativeSubmitChange);},syncUI:function(){var j=this;var k=j.get("contentBox");j.set("id",k.guid());j._uiSetLabelAlign(j.get("labelAlign"));},add:function(n,j){var s=this;var o=b.Array(n);var k=o.length;var q;var n=s.fields;var p=s.get("contentBox");for(var m=0;m<o.length;m++){q=o[m];q=b.Field.getField(q);if(q&&n.indexOf(q)==-1){n.add(q);if(j&&!q.get("rendered")){var l=q.get("node");var r=null;if(!l.inDoc()){r=p;}q.render(r);}}}},clearInvalid:function(){var j=this;j.fields.each(function(l,k,m){l.clearInvalid();});},getField:function(m){var k=this;var l;if(m){var j=k.fields;l=j.item(m);if(!h.isObject(l)){j.each(function(o,n,p){if(o.get("id")==m||o.get("name")==m){l=o;return false;}});}}return l;},invoke:function(l,k){var j=this;return j.fields.invoke(l,k);},isDirty:function(){var j=this;var k=false;j.fields.each(function(m,l,n){if(m.isDirty()){k=true;return false;}});return k;},isValid:function(){var j=this;var k=true;j.fields.each(function(m,l,n){if(!m.isValid()){k=false;return false;}});return k;},markInvalid:function(l){var j=this;var k=j._markInvalidObject;if(h.isArray(l)){k=j._markInvalidArray;}b.each(l,k,j);return j;},remove:function(l,k){var j=this;j.fields.remove(l);if(k){l=j.getField(l);if(l){l.destroy();}}return j;},resetValues:function(){var j=this;j.fields.each(function(l,k,m){l.resetValue();});},submit:function(k){var j=this;var l=j.isValid();if(l){if(j.get("nativeSubmit")){j.get("contentBox").submit();}else{k=k||{};b.mix(k,{id:j.get("id")});b.io(j.get("action"),{form:k,method:j.get("method"),on:{complete:b.bind(j._onSubmitComplete,j),end:b.bind(j._onSubmitEnd,j),failure:b.bind(j._onSubmitFailure,j),start:b.bind(j._onSubmitStart,j),success:b.bind(j._onSubmitSuccess,j)}});}}return l;},_afterDisabledChange:function(k){var j=this;var l="disable";if(k.newVal){l="enable";}j.fields.each(function(n,m,o){n[l];});},_afterLabelAlignChange:function(k){var j=this;j._uiSetLabelAlign(k.newVal,k.prevVal);},_afterNativeSubmitChange:function(l){var j=this;var k=j.get("contentBox");var m="on";if(l.newVal){m="detach";}k[m]("submit",j._onSubmit);},_attributeGetter:function(l,k){var j=this;return j.get("contentBox").attr(k);},_attributeSetter:function(l,k){var j=this;j.get("contentBox").attr(k,l);return l;},_getNodeId:function(l){var k;if(l instanceof b.Field){k=l.get("node");}else{k=b.one(l);}var j=k&&k.guid();return j;},_onSubmit:function(j){j.halt();},_onSubmitComplete:function(k){var j=this;j.fire("complete",{ioEvent:k});},_onSubmitEnd:function(k){var j=this;j.fire("end",{ioEvent:k});},_onSubmitFailure:function(k){var j=this;j.fire("failure",{ioEvent:k});},_onSubmitStart:function(k){var j=this;j.fire("start",{ioEvent:k});},_onSubmitSuccess:function(k){var j=this;j.fire("success",{ioEvent:k});},_renderForm:function(){var j=this;j.get("contentBox").removeClass(a);},_markInvalidArray:function(l,k,n){var j=this;var m=j.getField(l.id);if(m){m.markInvalid(l.message);}},_markInvalidObject:function(l,k,n){var j=this;var m=(!h.isFunction(l))&&j.getField(k);if(m){m.markInvalid(l);}},_setFieldsArray:function(m,l,o,k){var j=this;var n=j.getField(m.id);if(n){n.set("value",m.value);if(k){n.set("prevVal",n.get("value"));}}},_setFieldsObject:function(m,l,o,k){var j=this;var n=(!h.isFunction(m))&&j.getField(l);if(n){n.set("value",m);if(k){n.set("prevVal",n.get("value"));}}},_uiSetLabelAlign:function(l,n){var j=this;var k=j.get("contentBox");k.replaceClass(d[n],d[l]);var m="removeClass";if(/right|left/.test(l)){m="addClass";}k[m](e);}}});b.Form=g;},"@VERSION@",{requires:["aui-base","aui-data-set","aui-form-field","querystring-parse"]});